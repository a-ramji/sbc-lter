---
title: "SBC LTER analysis"
author: "Anna Ramji"
format: html
editor: visual
---

```{r}

```

## Introduction

In this Quarto Document, I'll be working with data from the Santa Barbara Coast LTER sites, analyzing data using statistical analysis methods covered in the Master of Environmental Data Science program's Environmental Data Science (EDS) 222: Statistics for Environmental Data Science course taught by Tamma Carleton (tcarleton\@ucsb.edu).

## Background

(Putting essential background information here)

(setting up the problem)

(metadata, column info, etc.)

### Dataset 1: Kelp Forest dynamics: Fish abundance

Reed, D. and R. Miller. 2023. SBC LTER: Reef: Kelp Forest Community Dynamics: Fish abundance ver 38. Environmental Data Initiative. https://doi.org/10.6073/pasta/92003d368dfe121f6709ad1507412f66 (Accessed 2023-11-22)

### Dataset 2: CA Spiny Lobster Data

Reed, D. and R. Miller. 2023. SBC LTER: Reef: Abundance, size and fishing effort for California Spiny Lobster (Panulirus interruptus), ongoing since 2012 ver 9. Environmental Data Initiative. https://doi.org/10.6073/pasta/3595322687af94cd532620ad9db94c77 (Accessed 2023-11-22).

### Dataset 3: Feeding relationships

Santa Barbara Coastal LTER, J.E. Byrnes, D.C. Reed, B.J. Cardinale, K.C. Cavanaugh, S.J. Holbrook, and R.J. Schmitt. 2022. SBC LTER: Reef: Feeding relationships for kelp forest species ver 4. Environmental Data Initiative. https://doi.org/10.6073/pasta/e82a082f4440d469c84e11a265266004 (Accessed 2023-11-22).

### Importing libraries

```{r libraries, warning=FALSE, message=FALSE}
library(tidyverse)
library(readr)
library(gt)
library(tufte)
library(feasts)
library(here)
library(patchwork)
library(janitor)

```

## Reading in the Data

```{r}



```

```{r lobsters_fp}
# using the package `here()`

# setting the file path for our lobster abundance csv
lobster_abundance_fp <- here("data", "lobsters", "knb-lter-sbc.77.9",  "Lobster_Abundance_All_Years_20230831.csv")

# and setting the file path for our lobster trap counts csv
lobster_trap_counts_fp <- here("data", "lobsters", "knb-lter-sbc.77.9", "Lobster_Trap_Counts_All_Years_20210519.csv")
```


```{r lobsters_readin}
lobster_abd <- read_csv(lobster_abundance_fp, na = c("-99999")) |> 
  clean_names() |> 
  select(-year, -month)
#|> 
 # mutate("year" = lubridate::as_date(year))

lobster_trap <- read_csv(lobster_trap_counts_fp, na = c("-99999")) |> 
  clean_names()

head(lobster_abd)
tail(lobster_abd)
# head(lobster_trap)
```


```{r}

```

```{r}

```



```{r}
# setting file path for fish abundance
fish_abd_fp <- here("data", "fish_abundance", "knb-lter-sbc.17.38", "Annual_fish_comb_20230814.csv")

fish_abd <- read_csv(fish_abd_fp, na = c("-99999")) |> 
  clean_names() |> 
  select(-year, -month)

head(fish_abd)
```

```{r}
# setting water temperature file path
water_temp_fp <- here("data", "water-temp", "knb-lter-sbc.13.29", "Bottom_temp_all_years_20230724.csv")

water_temp <- read_csv(water_temp_fp, na = c("-99999")) |> 
  clean_names() |> 
  rename("date" = date_local, "time" = time_local) |> 
  select(-serial) |> 
  group_by(date)

head(water_temp)
tail(water_temp)
```


```{r}
lobster_abd_temp <- left_join(lobster_abd, water_temp, by = c("date", "site"))
head(lobster_abd_temp)
```

```{r}




#ggplot(data = lobster_abd_temp) +
 # geom_jitter(aes(x = temp_c, y = count))


```

```{r}
ggplot(data = lobster_abd_temp) +
  geom_line(aes(x = date, y = temp_c))

```



```{r}
summary(lm(formula = temp_c ~ count, data = lobster_abd_temp))
```

